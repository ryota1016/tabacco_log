<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>sample</title>
</head>
<h1><div id="title" style="text-align:center">しんすけボタン</div>
<body>
<br>
 <div id="playButton" style="text-align:center;">
  <button onclick="play()" id="play" style="width:200px;height:100px"><span style="font-size:30px">しんすけ</span></button>
 </div> 
<table width="100%">
<td width="30%"></td>
<td width= "40%" align="right">
  		<button onclick="continuousPlaySwitch()" style="width:70px;height:50px"><div id="onOff">連続再生 OFF</div></button>
</td>
<td width="30%"></td>
</table> 
  <script language="javascript" type="text/javascript">
  var onOffStr = document.getElementById("onOff");
  var cPlayF = 0;
  var music = new Audio();
  var lastNum = 188;
  var rand = Math.ceil(Math.random() * lastNum);
  function init() {
    music.preload = "auto";

    music.addEventListener("ended", function () {
      if(cPlayF == 0){
        return;
      }
      rand = Math.ceil(Math.random() * lastNum);
      music.src = "sinsukevoice/voice" + rand + ".mp3";
      music.load();
      music.currentTime = 0;
      music.play();
    }, false);
  }

  function play() {
    rand = Math.ceil(Math.random() * lastNum);
    music.src = "sinsukevoice/voice" + rand + ".mp3";
    music.load();
    music.currentTime = 0;
    music.play();
  }

  function continuousPlaySwitch(){
     if(cPlayF == 1){
       cPlayF = 0;
       onOffStr.innerHTML = "連続再生 OFF";
     }
     else{
       cPlayF = 1;
       onOffStr.innerHTML = "連続再生 ON";
     }
  }

  init();
  </script>
</body>
</html>